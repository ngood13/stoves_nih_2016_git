---
title: "Load and Save Data"
output:
  html_document:
    toc: true
    toc_float: true
    theme: united
---

```{r, echo=FALSE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  library(tidyverse)
  library(forcats)
```

```{r, echo=FALSE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  source("../r_scripts/R_load_data.R")
  source("../r_scripts/R_load_metadata.R")
  source("../r_scripts/R_tidy.R")
  source("../r_scripts/R_functions.R")
```

# Pollutant data

### Five gas

Loads inidividual files that contain the CO~2~ mixing ratio (% vol), CO mixing ratio (ppmv), and CH~4~ mixing ratio (ppmv) in the main fume hood exhaust line.  Combines the individual files and saves the data as a single .RDS file containing the mixing ratios, timestamps, and the test ID.  

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_fivegas <- load_fivegas()
  saveRDS(data_fivegas, file = "../r_files/fivegas.RDS")
```

### Gravimetric

Loads filter mass data and resaves as .RDS.  Al filter masses are in $\mu$g. 

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_grav <- load_grav_file() 
  saveRDS(data_grav, file = "../r_files/grav.RDS")
```

### EC/OC

Loads the data file from the Sunset Laboratory OC-EC Aerosol Analyzer and saves as an .RDS.  This data file contains the concentration of elemental carbon (EC), organic carbon (OC), and total carbon (TC) on the quartz filters in units of $\mu$g/cm^2^.  

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  ecoc <- load_ecoc_file()
  head(ecoc, 5)
  saveRDS(ecoc, file = "../r_files/ecoc.RDS")
``` 

### Carbonyls

Loads the carbonyl data and resaves data as .RDS.  All values are in $\mu$g.  

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE} 
  carbonyls <- load_singlefiles("carbonyls")
  saveRDS(carbonyls, file = "../r_files/carbonyls.RDS")
```

### SMPS

Loads and resaves data as an .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE} 
  smps <- load_multifile(fldr = "../data/smps",
                         pattern = "_SMPS.txt$", inst = "smps")
  saveRDS(smps, file = "../r_files/smps.RDS")
```

### CO~2~

Loads and saves the CO2 voltage data (`calibration?`)

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE} 
  co2 <- load_multifile(fldr = "../data/co2",
                        pattern = ".*_CO2.*.csv$", inst = "co2")

  saveRDS(co2, file = "../r_files/co2.RDS")
```

### PAX

Loads and resaves data as .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  pax <- load_multifile(fldr = "../data/pax",
                        pattern = "ALLDAY_PAX.csv$", inst = "pax")

  saveRDS(pax, file = "../r_files/pax.RDS")
```

### Temperature

Loads and resaves data as an .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  temp <- load_multifile(fldr = "../data/temp",
                         pattern = "_TEMP.csv", inst = "temp")
  saveRDS(temp, file = "../r_files/temp.RDS")
```

### Transmissometer

Loads and resaves data as an .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  trans <- load_trans_file("../data/trans/MC Transmissometer Final.xlsx")
  saveRDS(trans, file = "../r_files/trans.RDS")
```
 
### VOCs

Loads the microgram sheet and resaves data as an .RDS.
 
```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  #voc <- load_singlefiles("voc")
  #save(voc, file = "../r_files/voc.RDS")
```

# Metadata

* Fuel preparation data

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_fuel_prep <- load_fuel_prep()
  saveRDS(data_fuel_prep, file = "../r_files/data_fuel_prep.RDS")
```

* Tester 1 log

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_tester_one <- load_test_one()
  saveRDS(data_tester_one, file = "../r_files/data_tester_one.RDS")
```

* Tester 2 log

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_tester_two <- load_test_two()
  saveRDS(data_tester_two, file = "../r_files/data_tester_two.RDS")
```

* Calibration 2 log

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_cal_two <- load_cal_two()
  saveRDS(data_cal_two, file = "../r_files/data_cal_two.RDS")
```

* Test log

```{r, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  mc_test_log <- load_test_log()
  saveRDS(mc_test_log, file = "../r_files/mc_test_log.RDS")
```