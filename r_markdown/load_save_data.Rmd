---
title: "Load and save data"
output:
  html_document:
    toc: true
    toc_float: true
    theme: united
---

```{r, echo=FALSE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  library(tidyverse)
  library(forcats)
```

```{r, echo=FALSE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  source("../r_scripts/R_load_data.R")
  source("../r_scripts/R_load_metadata.R")
  source("../r_scripts/R_tidy.R")
  source("../r_scripts/R_functions.R")
```

# Pollutant data

## co2

Loads and saves the CO2 voltage data (`calibration?`)

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE} 
  co2 <- load_multifile(fldr = "../data/co2",
                        pattern = ".*_CO2.*.csv$", inst = "co2")

  saveRDS(co2, file = "../r_files/co2.RDS")
```

## ecoc

Loads ecoc data file and saves

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  ecoc <- load_ecoc_file()
  ecoc
  saveRDS(ecoc, file = "../r_files/ecoc.RDS")
```  

## fivegas

Loads fivegas mixing ratio files and resaves.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_fivegas <- load_fivegas()
  saveRDS(data_fivegas, file = "../r_files/fivegas.RDS")
```

## gravimetric

Loads filter weight data and resaves as .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_grav <- load_grav_file() 
  saveRDS(data_grav, file = "../r_files/grav.RDS")
```

## carbonyls

Loads and resaves data as .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE} 
  ions <- load_singlefiles("ions")
  save(ions, file = "../r_files/ions.RDS")
```

## pax

Loads and resaves data as .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  pax <- load_multifile(fldr = "../data/pax",
                        pattern = "ALLDAY_PAX.csv$", inst = "pax")

  saveRDS(pax, file = "../r_files/pax.RDS")
```

## smps

Loads and resaves data as an .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE} 
  smps <- load_multifile(fldr = "../data/smps",
                         pattern = "_SMPS.txt$", inst = "smps")
  saveRDS(smps, file = "../r_files/smps.RDS")
```

## temperature

Loads and resaves data as an .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  temp <- load_multifile(fldr = "../data/temp",
                         pattern = "_TEMP.csv", inst = "temp")
  saveRDS(temp, file = "../r_files/temp.RDS")
```

## transmissometer

Loads and resaves data as an .RDS.

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  trans <- load_trans_file("../data/trans/MC Transmissometer Final.xlsx")
  saveRDS(trans, file = "../r_files/trans.RDS")
```
 
## vocs

Loads the microgram sheet  and resaves data as an .Rda.
 
```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  #voc <- load_singlefiles("voc")
  #save(voc, file = "../r_files/voc.RDS")
```

# Metadata

* Fuel preparation data

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_fuel_prep <- load_fuel_prep()
  saveRDS(data_fuel_prep, file = "../r_files/data_fuel_prep.RDS")
```

* Tester 1 log

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_tester_one <- load_test_one()
  saveRDS(data_tester_one, file = "../r_files/data_tester_one.RDS")
```

* Tester 2 log

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_tester_two <- load_test_two()
  saveRDS(data_tester_two, file = "../r_files/data_tester_two.RDS")
```

* Calibration 2 log

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  data_cal_two <- load_cal_two()
  saveRDS(data_cal_two, file = "../r_files/data_cal_two.RDS")
```

* Test log

```{r, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  mc_test_log <- load_test_log()
  saveRDS(mc_test_log, file = "../r_files/mc_test_log.RDS")
```

