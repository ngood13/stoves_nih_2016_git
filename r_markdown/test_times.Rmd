---
title: "experiment metadata"
author: "Nicholas Good"
date: "11/21/2016"
output: html_document
---

## Libraries

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  library(tidyverse)
```

## Source files

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  source("../R_scripts/R_load_data.R")
  source("../R_scripts/R_load_metadata.R")
  source("../R_scripts/R_tidy.R")
```

## Load sample, wood and batch test meta data

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  load("../r_files/samples.Rda")
  load("../r_files/batch_times.Rda")
  load("../r_files/wood_times.Rda")
```

* Combine test types

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  test_times <- dplyr::bind_rows(dplyr::select(wood_times, -date),
                                 dplyr::select(batch_times, -date)) %>%
                dplyr::inner_join(dplyr::select(samples, id, date),
                                  test_times, by = "id") %>%
                dplyr::filter(is.na(value)==FALSE) %>%
                dplyr::mutate(id = as.factor(id))
```

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  head(test_times)
```

## Save data

```{r, echo=TRUE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  save(test_times, file = "../r_files/test_times.Rda")
```

## Summary

```{r, echo=FALSE, warning=FALSE, message=FALSE, results='markup', cache=FALSE}
  samples <- dplyr::select(samples, id, stove, fuel)
```

Test times were measured for `r length(unique(test_times$id))` experiments between `r min(test_times$date, na.rm = TRUE)` and `r max(test_times$date, na.rm = TRUE)`. There are times for tests: `r setdiff(levels(samples$id), levels(test_times$id))`.